/**
 *
 * @classdesc testMatchingImposer
 *
 * @constructor
 */
Indigo.Tests.testMatchingImposer = function() {};
Indigo.Tests.testMatchingImposer.prototype = new Indigo.Tests.testSuite(app);
Indigo.Tests.testMatchingImposer.prototype.constructor = Indigo.Tests.testMatchingImposer;
Indigo.Tests.testMatchingImposer.prototype.name = 'testMatchingImposer';

Indigo.Tests.testMatchingImposer.prototype.setUp = function () {
	this.pocient = new Indigo.MatchingImposer(this.app);
	this.testCommonPath = '/testCommons/d9/111/';
	var job = {
		"template" : 'testMatchingImposer',
		"separations" : 'CMYK',
		"roll" : '2',
		"print_list" : [
			this.testsFolder + this.testCommonPath + '001/spaklevka_08_klei.eps',
			this.testsFolder + this.testCommonPath + '002/spaklevka_1_5_klei.eps',
		],
	};
	this.pocient.setup(job);
	this.pocient.templateFolder = this.testsFolder + '/' + this.name;
};

/**
 * Test
 * 
 * В 001 и хотфолдер должен упасть d9111001_002_UTV_1.pdf
 * @todo Добавить тест длинного задания, матчингов должно стать больше
 */
Indigo.Tests.testMatchingImposer.prototype.run = function() {
	this.pocient.run();
	this.assemblies = [
		this.testsFolder + this.testCommonPath + '001/d9111001_002_UTV_1.pdf',
		this.pocient.hotFolder + '/' + 'd9111001_002_UTV_1.pdf',
	];
	for (var i=0, l=this.assemblies.length; i < l; i++) {
		var result = this.assertFileExists(this.assemblies[i]);
		this.log(result, '.Created');
	}
};

/**
 * TearDown
 */
Indigo.Tests.testMatchingImposer.prototype.tearDown = function() {
	for (var i=0, l=this.assemblies.length; i < l; i++) {
		var testResult = new File(this.assemblies[i]);
		if (testResult.exists) {
			testResult.remove();
		}
	}
};
